/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={893:function(t){t.exports=(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(t,e,r){return(e=function(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}t.r(e),t.d(e,{default:()=>a});const a={host:{listen:function(t){var e=function(e){var n={};try{n=null!=e&&e.data?JSON.parse(e.data):{}}catch(t){n=(null==e?void 0:e.data)||{}}var r=n,o=r.scope,i=r.kind;"sw-data"!==o||["user-metadata","nostr-event","err-msg","payment-response"].includes(i)||t(n)};return window.addEventListener("message",e),{close:function(){return window.removeEventListener("message",e)}}},sendContext:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!t)throw Error("Invalid context value, it must be an object with the user, host_origin");var o=t||{},i=o.pubkey,a=o.display_name,s=o.name,d=o.picture,u=o.banner,c=o.nip05,l=o.lud16,p=o.lud06,v=o.website;if(!i||void 0===a||void 0===s||void 0===d||void 0===u||void 0===c||void 0===l||void 0===p||void 0===v)throw Error("Invalid user values, it must be an object with the following properties pubkey, display_name, name, picture, banner, nip05, lud16, lud06, website");if(!n.startsWith("http://")&&!n.startsWith("https://"))throw Error("Invalid origin value, it must be a valid URL");r.contentWindow.postMessage({data:{user:t,host_origin:e},scope:"sw-data",kind:"user-metadata"},n)},sendEvent:function(t,e,n,r){if(!t||!e)throw Error("Both context and status are required");var o=t||{},i=o.pubkey,a=o.id,s=o.content,d=o.created_at,u=o.tags,c=o.sig,l=o.kind;if(!(i&&a&&void 0!==s&&d&&u&&c&&l))throw Error("Invalid context value, it must be a valid nostr event");if(!n.startsWith("http://")&&!n.startsWith("https://"))throw Error("Invalid origin value, it must be a valid URL");r.contentWindow.postMessage({data:{event:t,status:e},scope:"sw-data",kind:"nostr-event"},n)},sendPaymentResponse:function(t,e,n){if(!t)throw Error("Missing 'context': an object with 'status' and 'preImage' is required.");var r=t||{},i=r.status,a=r.preImage;if(void 0===i||!0===i&&!a)throw Error("Invalid 'context': must include both 'status' and 'preImage' properties.");if(!e.startsWith("http://")&&!e.startsWith("https://"))throw Error("Invalid 'origin': must be a valid URL starting with 'http://' or 'https://'.");n.contentWindow.postMessage({data:o(o({},t),{},{preImage:a||""}),scope:"sw-data",kind:"payment-response"},e)},sendError:function(t,e,n){if(!t)throw Error("Missing errMessage param");n.contentWindow.postMessage({data:t,scope:"sw-data",kind:"err-msg"},e)}},client:{ready:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.ancestorOrigins[0];"android"===(null===(t=window)||void 0===t||null===(t=t.originSystem)||void 0===t?void 0:t.name)?window.parent.postMessage(JSON.stringify({scope:"sw-data",kind:"app-loaded",data:null})):window.parent.postMessage(JSON.stringify({scope:"sw-data",kind:"app-loaded",data:null}),e)},listen:function(t){var e=function(e){var n={};try{n=null!=e&&e.data?JSON.parse(e.data):{}}catch(t){n=(null==e?void 0:e.data)||{}}var r=n,o=r.scope,i=r.kind;"sw-data"!==o||["app-loaded","sign-event","sign-publish","custom-data"].includes(i)||t(n)};return window.addEventListener("message",e),{close:function(){return window.removeEventListener("message",e)}}},requestEventSign:function(t,e){var n,r=t||{},o=r.content,i=r.tags,a=r.kind;if(void 0===o||!i||!a)throw Error("Invalid context value, it must be a valid nostr event");"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-event"})):window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-event"}),e)},requestEventPublish:function(t,e){var n,r=t||{},o=r.content,i=r.tags,a=r.kind;if(void 0===o||!i||!a)throw Error("Invalid context value, it must be a valid nostr event");"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-publish"})):window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-publish"}),e)},requestPayment:function(t,e){var n,r=t||{},o=r.address,i=r.amount,a=r.nostrPubkey,s=r.nostrEventIDEncode;if(!(o.startsWith("lnbc")||o.includes("@")||o.startsWith("lnurl")))throw new Error("Invalid 'address' in context: must be a valid Lightning address (e.g. user@domain.com), LNURL (starting with 'lnurl'), or BOLT11 invoice (starting with 'lnbc').");if(!(null!=o&&o.startsWith("lnbc")||i))throw new Error("Missing 'amount' in context: amount is required unless the address is a BOLT11 invoice (starting with 'lnbc').");var d={address:o,amount:i,nostrPubkey:a||"",nostrEventIDEncode:s||""};"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:d,scope:"sw-data",kind:"payment-request"})):window.parent.postMessage(JSON.stringify({data:d,scope:"sw-data",kind:"payment-request"}),e)},sendContext:function(t,e){var n;if(!t||"string"!=typeof t)throw Error("Invalid context value, it must be a string value");"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"custom-data"})):window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"custom-data"}),e)}}};return e})()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";function t(){var n,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function s(t,o,i,a){var s=o&&o.prototype instanceof u?o:u,c=Object.create(s.prototype);return e(c,"_invoke",function(t,e,o){var i,a,s,u=0,c=o||[],l=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,e){return i=t,a=0,s=n,p.n=e,d}};function v(t,e){for(a=t,s=e,r=0;!l&&u&&!o&&r<c.length;r++){var o,i=c[r],v=p.p,f=i[2];t>3?(o=f===e)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=n):i[0]<=v&&((o=t<2&&v<i[1])?(a=0,p.v=e,p.n=i[1]):v<f&&(o=t<3||i[0]>e||e>f)&&(i[4]=t,i[5]=e,p.n=f,a=0))}if(o||t>1)return d;throw l=!0,e}return function(o,c,f){if(u>1)throw TypeError("Generator is already running");for(l&&1===c&&v(c,f),a=c,s=f;(r=a<2?n:s)||!l;){i||(a?a<3?(a>1&&(p.n=-1),v(a,s)):p.n=s:p.v=s);try{if(u=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=n}else if((r=(l=p.n<0)?s:t.call(e,p))!==d)break}catch(t){i=n,a=1,s=t}finally{u=1}}return{value:r,done:l}}}(t,i,a),!0),c}var d={};function u(){}function c(){}function l(){}r=Object.getPrototypeOf;var p=[][i]?r(r([][i]())):(e(r={},i,function(){return this}),r),v=l.prototype=u.prototype=Object.create(p);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,e(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return c.prototype=l,e(v,"constructor",l),e(l,"constructor",c),c.displayName="GeneratorFunction",e(l,a,"GeneratorFunction"),e(v),e(v,a,"Generator"),e(v,i,function(){return this}),e(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m:f}})()}function e(t,n,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}e=function(t,n,r,o){function a(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?i?i(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r:(a("next",0),a("throw",1),a("return",2))},e(t,n,r,o)}function r(t,e,n,r,o,i,a){try{var s=t[i](a),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(r,o)}var o=n(893).client,i="";function a(){return s.apply(this,arguments)}function s(){var e;return e=t().m(function e(){var n,r,a,s;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:if(i){t.n=1;break}return t.a(2);case 1:return n=document.getElementById("lang").value,t.p=2,t.n=3,fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:i,lang:n})});case 3:return r=t.v,t.n=4,r.json();case 4:a=t.v,document.getElementById("translated").innerText="Detected Language: ".concat(a.detectedLanguage,"\nðŸ” Translation:\n").concat(a.translation),o.send({kind:"translation:complete",data:{original:i,translated:a.translation,lang:n}}),t.n=6;break;case 5:t.p=5,s=t.v,document.getElementById("translated").innerText="Error translating text.",console.error(s);case 6:return t.a(2)}},e,null,[[2,5]])}),s=function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function s(t){r(a,o,i,s,d,"next",t)}function d(t){r(a,o,i,s,d,"throw",t)}s(void 0)})},s.apply(this,arguments)}document.addEventListener("DOMContentLoaded",function(){var t=localStorage.getItem("preferredLang");t&&(document.getElementById("lang").value=t),o.ready(),o.listen(function(t){var e,n;"yakihonne:context"===t.kind&&(i=(null===(e=t.data)||void 0===e?void 0:e.content)||(null===(n=t.data)||void 0===n?void 0:n.text)||"",document.getElementById("original").innerText="ðŸ“ Original:\n"+i,a())}),document.getElementById("lang").addEventListener("change",function(){localStorage.setItem("preferredLang",document.getElementById("lang").value),a()}),document.getElementById("resetBtn").addEventListener("click",function(){document.getElementById("translated").innerText="ðŸ” Translation:",localStorage.removeItem("preferredLang")})})})()})();