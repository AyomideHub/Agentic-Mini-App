(()=>{var t={893:function(t){t.exports=(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e,r){return(e=function(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}t.r(e),t.d(e,{default:()=>o});const o={host:{listen:function(t){var e=function(e){var n={};try{n=null!=e&&e.data?JSON.parse(e.data):{}}catch(t){n=(null==e?void 0:e.data)||{}}var r=n,i=r.scope,a=r.kind;"sw-data"!==i||["user-metadata","nostr-event","err-msg","payment-response"].includes(a)||t(n)};return window.addEventListener("message",e),{close:function(){return window.removeEventListener("message",e)}}},sendContext:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!t)throw Error("Invalid context value, it must be an object with the user, host_origin");var i=t||{},a=i.pubkey,o=i.display_name,s=i.name,d=i.picture,l=i.banner,u=i.nip05,c=i.lud16,p=i.lud06,v=i.website;if(!a||void 0===o||void 0===s||void 0===d||void 0===l||void 0===u||void 0===c||void 0===p||void 0===v)throw Error("Invalid user values, it must be an object with the following properties pubkey, display_name, name, picture, banner, nip05, lud16, lud06, website");if(!n.startsWith("http://")&&!n.startsWith("https://"))throw Error("Invalid origin value, it must be a valid URL");r.contentWindow.postMessage({data:{user:t,host_origin:e},scope:"sw-data",kind:"user-metadata"},n)},sendEvent:function(t,e,n,r){if(!t||!e)throw Error("Both context and status are required");var i=t||{},a=i.pubkey,o=i.id,s=i.content,d=i.created_at,l=i.tags,u=i.sig,c=i.kind;if(!(a&&o&&void 0!==s&&d&&l&&u&&c))throw Error("Invalid context value, it must be a valid nostr event");if(!n.startsWith("http://")&&!n.startsWith("https://"))throw Error("Invalid origin value, it must be a valid URL");r.contentWindow.postMessage({data:{event:t,status:e},scope:"sw-data",kind:"nostr-event"},n)},sendPaymentResponse:function(t,e,n){if(!t)throw Error("Missing 'context': an object with 'status' and 'preImage' is required.");var r=t||{},a=r.status,o=r.preImage;if(void 0===a||!0===a&&!o)throw Error("Invalid 'context': must include both 'status' and 'preImage' properties.");if(!e.startsWith("http://")&&!e.startsWith("https://"))throw Error("Invalid 'origin': must be a valid URL starting with 'http://' or 'https://'.");n.contentWindow.postMessage({data:i(i({},t),{},{preImage:o||""}),scope:"sw-data",kind:"payment-response"},e)},sendError:function(t,e,n){if(!t)throw Error("Missing errMessage param");n.contentWindow.postMessage({data:t,scope:"sw-data",kind:"err-msg"},e)}},client:{ready:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.ancestorOrigins[0];"android"===(null===(t=window)||void 0===t||null===(t=t.originSystem)||void 0===t?void 0:t.name)?window.parent.postMessage(JSON.stringify({scope:"sw-data",kind:"app-loaded",data:null})):window.parent.postMessage(JSON.stringify({scope:"sw-data",kind:"app-loaded",data:null}),e)},listen:function(t){var e=function(e){var n={};try{n=null!=e&&e.data?JSON.parse(e.data):{}}catch(t){n=(null==e?void 0:e.data)||{}}var r=n,i=r.scope,a=r.kind;"sw-data"!==i||["app-loaded","sign-event","sign-publish","custom-data"].includes(a)||t(n)};return window.addEventListener("message",e),{close:function(){return window.removeEventListener("message",e)}}},requestEventSign:function(t,e){var n,r=t||{},i=r.content,a=r.tags,o=r.kind;if(void 0===i||!a||!o)throw Error("Invalid context value, it must be a valid nostr event");"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-event"})):window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-event"}),e)},requestEventPublish:function(t,e){var n,r=t||{},i=r.content,a=r.tags,o=r.kind;if(void 0===i||!a||!o)throw Error("Invalid context value, it must be a valid nostr event");"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-publish"})):window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"sign-publish"}),e)},requestPayment:function(t,e){var n,r=t||{},i=r.address,a=r.amount,o=r.nostrPubkey,s=r.nostrEventIDEncode;if(!(i.startsWith("lnbc")||i.includes("@")||i.startsWith("lnurl")))throw new Error("Invalid 'address' in context: must be a valid Lightning address (e.g. user@domain.com), LNURL (starting with 'lnurl'), or BOLT11 invoice (starting with 'lnbc').");if(!(null!=i&&i.startsWith("lnbc")||a))throw new Error("Missing 'amount' in context: amount is required unless the address is a BOLT11 invoice (starting with 'lnbc').");var d={address:i,amount:a,nostrPubkey:o||"",nostrEventIDEncode:s||""};"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:d,scope:"sw-data",kind:"payment-request"})):window.parent.postMessage(JSON.stringify({data:d,scope:"sw-data",kind:"payment-request"}),e)},sendContext:function(t,e){var n;if(!t||"string"!=typeof t)throw Error("Invalid context value, it must be a string value");"android"===(null===(n=window)||void 0===n||null===(n=n.originSystem)||void 0===n?void 0:n.name)?window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"custom-data"})):window.parent.postMessage(JSON.stringify({data:t,scope:"sw-data",kind:"custom-data"}),e)}}};return e})()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}(()=>{"use strict";var t=n(893);const{client:e}=t;let r="";async function i(){if(!r)return;const t=document.getElementById("lang").value,n=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r,lang:t})}),i=await n.json();document.getElementById("translated").innerText=`Detected Language: ${i.detectedLanguage}\nüîÅ Translation:\n${i.translation}`,e.send({kind:"translation:complete",data:{original:r,translated:i.translation,lang:t}})}e.ready(),e.listen(t=>{"yakihonne:context"===t.kind&&(r=t.data?.content||t.data?.text||"",document.getElementById("original").innerText="üìù Original:\n"+r,i())}),document.getElementById("lang").addEventListener("change",i),document.getElementById("resetBtn").addEventListener("click",()=>{document.getElementById("translated").innerText="üîÅ Translation:",localStorage.removeItem("preferredLang")})})()})();